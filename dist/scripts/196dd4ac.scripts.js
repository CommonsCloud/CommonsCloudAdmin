"use strict";angular.module("commonsCloudAdminApp",["ivpusic.cookie","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/authorize",{templateUrl:"views/authorize.html",controller:"AuthorizeCtrl"}).when("/applications",{templateUrl:"views/applications.html",controller:"ApplicationsCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0).hashPrefix("!"),$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"]}]).run(["$http","ipCookie",function(a,b){a.defaults.headers.common.Authorization="Bearer "+b("session"),a.defaults.headers.common["Content-Type"]="application/json"}]),angular.module("commonsCloudAdminApp").controller("MainCtrl",["$rootScope","$scope",function(){}]),angular.module("commonsCloudAdminApp").controller("AuthorizeCtrl",["$scope","$rootScope","$location","ipCookie",function(a,b,c,d){a.getAccessToken=function(){var a=c.hash(),e=a.substring(0,a.indexOf("&")),f=e.replace("access_token=",""),g={expires:2};return b.authenticated=!0,d("session",f,g)},a.getAccessToken(),c.hash(""),c.path("/")}]),angular.module("commonsCloudAdminApp").factory("AuthorizationInterceptor",["$rootScope","$q","ipCookie",function(a,b,c){return a.auth={is_authenticated:!1},c("session")&&(a.auth.is_authenticated=!0),{request:function(a){var d=c("session");return a.headers=a.headers||{},d&&(a.headers.Authorization="Bearer "+d),console.log("config",a||b.when(a)),a||b.when(a)},response:function(a){return 401===a.status&&console.log("// TODO: Redirect user to login page."),console.log("response",a||b.when(a)),a||b.when(a)}}}]).config(["$httpProvider",function(a){a.interceptors.push("AuthorizationInterceptor")}]),angular.module("commonsCloudAdminApp").controller("ApplicationsCtrl",["$scope","$http","$resource",function(a,b){console.log(b.defaults.headers),b.get("http://api.commonscloud.org/v2/applications.json",{withCredentials:!0}).success(function(a,b,c,d){console.log("SUCCESS: ",a,b,c,d)}).error(function(a,b,c,d){console.log("ERROR: ",a,b,c,d)})}]),angular.module("commonsCloudAdminApp").factory("CommonsCloudAPI",["$http",function(){return{getApplications:function(){return!0}}}]);